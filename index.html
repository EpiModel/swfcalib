<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Automated the Calibration of Complex Models on Slurm Equipped HPC • swfcalib</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Automated the Calibration of Complex Models on Slurm Equipped HPC">
<meta name="description" content="swfcalib is designed to automate the calibration of complex multi-parameters multi-outputs models ran on Slurm equipped HPC.">
<meta property="og:description" content="swfcalib is designed to automate the calibration of complex multi-parameters multi-outputs models ran on Slurm equipped HPC.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">swfcalib</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/swfcalib.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="swfcalib">swfcalib<a class="anchor" aria-label="anchor" href="#swfcalib"></a>
</h1></div>
<!-- badges: start -->

<p><code>swfcalib</code> is designed to automate the calibration of complex multi-parameters multi-outputs models ran on <a href="https://slurm.schedmd.com/" class="external-link">Slurm</a> equipped HPC.</p>
<div class="section level2">
<h2 id="should-you-use-swfcalib">Should you use <code>swfcalib</code>
<a class="anchor" aria-label="anchor" href="#should-you-use-swfcalib"></a>
</h2>
<p><code>swfcalib</code> is not the simplest calibration system to set up. It was designed to solve a specific set of problems listed below. If you already have a system that works well you should probably not consider <code>swfcalib</code>.</p>
<p>However, if you have the following issues, <code>swfcalib</code> may be for you:</p>
<ul>
<li>your model have many parameters to calibrate and produces many outputs.</li>
<li>you have an idea of how some parameters influence only some outputs (see example below)</li>
<li>your outputs are very noisy</li>
<li>you cannot or don’t want to have a <a href="https://slurm.schedmd.com/" class="external-link">Slurm</a> job that runs continuously for the whole duration of the calibration process (a few days to several weeks)</li>
</ul>
<p>By using <a href="https://github.com/EpiModel/slurmworkflow" class="external-link"><code>slurmworkflow</code></a>, <code>swfcalib</code> can implement a loop like behavior in <a href="https://slurm.schedmd.com/" class="external-link">Slurm</a> without the need of a pilot job staying alive for the whole duration of the calibration process (sometimes several weeks).</p>
<p><code>swfcalib</code> was created to calibrate epidemic models like <a href="https://github.com/EpiModel/DoxyPEP" class="external-link">this one</a>. These models have around 20 free parameters to calibrate and 20 outcomes to be matched to observed targets. However, knowledge of the model allow us to define many conditional one to one relationship between parameters and outcomes. <code>swfcalib</code> can use this knowledge to split the calibration into multiple waves of simpler parallel calibration jobs.</p>
</div>
<div class="section level2">
<h2 id="design">Design<a class="anchor" aria-label="anchor" href="#design"></a>
</h2>
<p>The calibration process follows a proposal, validation loop. Where the model is run with a set of parameters and new proposals are made according to the results. This goes on until the model is fully calibrated.</p>
<p>Terminology:</p>
<ul>
<li>
<em>model</em>: a function taking a <em>proposal</em> and returning some <em>outcomes</em>.</li>
<li>
<em>proposal</em>: a set of parameters values to be passed to the <em>model</em>
</li>
<li>
<em>outcomes</em>: the output of a <em>model</em> run for a given <em>proposal</em>.</li>
<li>
<em>job</em>: a set of parameters to be calibrated by using a subset of the <em>outcomes</em>
</li>
<li>
<em>wave</em>: a set of independent <em>jobs</em> that can be calibrated using the same run of the model.</li>
</ul>
<p>The specificity of <code>swfcalib</code> lies in the ability to try many proposal at once on an HPC, and to set up this proposal validation loop without a long running orchestrating job (pilot job).</p>
<p>The calibration is split into <em>waves</em>. Each wave can contains multiple <em>jobs</em>, each focusing on a set of parameters and related outcomes. This permits the parallel calibration of multiple independent parameters. At each <em>iteration</em>, the model is ran once per proposal, and each job gather the outcomes it needs to make its next proposal. Once all <em>jobs</em> in a <em>wave</em> are done, i.e. the parameters they govern are calibrated, the system moves to the next <em>wave</em>. This allows the sequential calibration of parameters when strong assumption about their independence can be made.</p>
<p>This design was crafted for the very noisy models where many replications are needed and where most parameters are independent or conditionally independent.</p>
</div>
<div class="section level2">
<h2 id="versatility">Versatility<a class="anchor" aria-label="anchor" href="#versatility"></a>
</h2>
<p><code>swfcalib</code> makes no assumptions on how a set of parameters should be changed and how the quality of fit is assessed. It is up to the user to provide the mechanism to:</p>
<ul>
<li>produce the next <em>proposals</em> to be tested</li>
<li>assess the quality of the fit</li>
</ul>
<p><code>swfcalib</code> provides some pre-built functions for this. See the getting started vignette.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <strong>swfcalib</strong> like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"EpiModel/swfcalib"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epimodel.github.io/swfcalib/">swfcalib</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing swfcalib</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Adrien Le Guillou <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4791-418X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=slurmworkflow" class="external-link"><img src="https://www.r-pkg.org/badges/version/slurmworkflow" alt="CRAN status"></a></li>
<li><a href="https://github.com/EpiModel/swfcalib/actions" class="external-link"><img src="https://github.com/EpiModel/swfcalib/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/EpiModel/swfcalib" class="external-link"><img src="https://codecov.io/gh/EpiModel/swfcalib/branch/main/graph/badge.svg?token=eo2r0HeP8Z" alt="codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrien Le Guillou.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
